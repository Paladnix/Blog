---
title: VIM 在ACM/ICPC中的非最佳实践
date: 2017-07-23 21:05:54
tags: [ACM, Vim]
---

5月份在看今年的Final直播，看到了ITMO队的屏幕的时候，看到一些骚操作，感觉自己是拿着冲锋枪当鸟枪使了。

Vim确实十分强大，其强大是有原因的。最主要的原因是他本是依托终端存在的，他与终端有着非常强的联通。终端的强大一定程度上让vim变的很牛逼。不需要插件就可以在内置命令行。

打比赛两年了，现在也算是个退役狗了，才发现自己并没有好好用vim这个神器，不仅仅是装逼。
第一年的时候简单会用vim来写代码，会简单的配置，会用一点点的快捷键。
第二年的时候会用更多的快捷键，并没有什么本质上的突破，除了会用一点bash脚本来加快测试等。

本文将以ACM比较场景作为线索，介绍一下Vim应该怎么用，以及，你为什么不要用IDE。

## 比赛开始

按照我们队的分工，我在前2分钟负责配置vim环境和代码环境。这里推荐一个简明配置清单：
```bash
vim ~/.vimrc
```

```vimrc
set nu                  " 行号
set mouse=a             " 鼠标可用
set shiftwidth=4        " 与tab宽度相关的
set tabstop=4           " tab宽度
set cindent             " c语言风格缩进
set autoindent          " 自动缩进
set cul                 " 高亮当前行
colorscheme desert      " 配色，选用你平时用的最好
syntax on               " 开启语法高亮

" 以下配置自己酌情
set noswapfile          " 不产生交换文件，在意外退出没有保存的情况下刚写的代码就没有了。
                        " 好处就是不会在打开文件的时候提醒你交换文件，下面会讲怎么处理这种请况。
```
在配置完vim后，我会写一个头文件和主函数的模板，然后命令行给每一题都复制一份。
模板会写：所有会用到的头文件、主函数、输入格式、输出Case、常用的#define、typedef、const等。

用一个四行的脚本来复制：
```bash
#!/bin/bash

for name in {A..M};
do
    cp a.cpp $name.cpp
done

# 我写的模板文件是a.cpp
# 脚本名为copy.sh
```
执行这个脚本有两个选择，一个是命令：`bash copy.sh`。
还有一个是先给脚本执行权限，然后直接运行脚本：`chmod +x copy.sh`、`./copy.sh`。

至此比赛已经开始2分钟了，一个队友应该已经看完一题了，开始玩吧。

## 测样例
写完代码就要开始测样例了。并不需要离开vim环境，直接一个命令搞定。
先来写一个脚本，这个脚本也可以在比赛开始就写掉：
```bash
#!/bin/bash

g++ $1.cpp -std=gnu++11 && cat $1.IN | ./a.out
```
这个脚本极其简单了，我们遵循一个规则来做就好了。
先解释一下脚本内容：脚本可以接受一个参数，按照我们上面的命名方式，这个参数就是题号的大写字母。我们默认编译输出文件为`a.out`， 你也可以换成对应的字母，这个没有关系。有两个命令，中间用逻辑操作符链接起来，只有在编译通过的时候才执行后面一句。第二句读取命名格式如`A.IN`的文件，并用管道输出给编译出来的程序。
结果会直接显示在终端，按Enter可以直接回到vim代码中。

这个脚本和输入文件写完以后，当你要测试的时候，不要退出vim。切换到vim的命令模式，冒号后输入例如A题`:!bash case.sh A` 然后回车就可以看到输出结果或是编译报错，按Enter键回到代码。

这些都是VIM与脚本结合所做的提速工作。下面介绍一些写代码过程中常用的快捷键。

## 编写代码
