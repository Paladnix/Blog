---
title: 真正的老司机如何用Linux文本命令
date: 2017-07-27 17:23:29
tags: [Linux]
---

Tomcat是最烂的软件，没有之一！Over!
因为日志系统冲突的问题，这两天跟Tomcat斗争了好久，最终被其无耻下流卑鄙所折服，自信点，你就是最烂的！于是就诞生了上一篇长文来叙述日志是怎么搞，现在这一篇也是在实战中学习到的。

曾经学这些命令的时候只知道这些命令有很多功能，也很困惑，一个命令搞这么多参数干嘛，有什么用啊，我反正不会用。然后今天就脸红了，是我不会用。
不得不说设计这些命令的前辈真的很厉害，然后发现windows就这么丢弃这些东西真的是自断后路。盖茨肯定意识到电脑以后会是标配，但是他一定没有意识到自己在让计算机变傻。或许他本身就很傻吧，不是很能懂，自己一个号称最优秀的程序员之一的人，在设计计算机的时候就这么把这些东西屏蔽掉，自己真的打算用吗？计算机是越来越多了，但是其真正强大的功能都被windows阉割了，也阉割了真正的优雅，一定程度上，我认为盖茨理解错了计算机处理信息的价值。

我喜欢vim、latex、linux他们都有一个共同的特点，就是连通性非常强，而且操作简单。在工作过程中除了浏览网页，我基本上不会用鼠标，快捷键加命令可以无所不达。

一般我会开两个终端窗口，一屏左右各占一个。开发服务器相关的应用的时候左边终端在本地，右侧终端`ssh`连进服务器。就单单这一个操作，在windows下就要复杂N倍，要安装软件才能支持`ssh`协议，还要软件模拟服务器终端，丑的要死不说，各种切换操作都要依靠鼠标... 而在linux的终端下，每个操作都只是简单的一个命令的事情，可以用命令完整精准的描述你的想法，所想即所得。

下面几个命令，很强大。

## ps
你知道Tomcat自己的`bin/shutdown.sh`是无法把自己关闭的吗？很抱歉，我特么这么用了一天了。然后ps发现一堆tomcat进程在跑，顿时恐惧袭上心头。关不掉你就别写个`shutdown.sh`啊，坑死爸爸了。
下次要关tomcat就特么直接`kill`，就不用那么麻烦了。

`ps` 命令是一个系统进程的快照。
使用`man` 命令获取内置说明文档：`man ps`，就可以看到各个参数的说明。这里会介绍一些参数的用法，但是仅仅是做个记录而已，有价值的东西是后面的实战例子。

在参数中，`ps`命令支持三种命令格式：
```
Unix    带短线(dash)：-a 参数
BSD     不带短线(dash)：a 参数
GNU     两个连续短线(two dash)：--a 参数
```
一般我用`Unix`格式的参数。
在解释这个命令之前还要解释一个东西就是Linux的进程。
在Linux中，一个进程组`(process group)`都是独一无二的会话`(session)`，这个`session`的`ID`就是这个`session`的第一个`process`的`ID`。这个进程也叫做`the session leader`。
```
-e              获取所有的进程，与-A 一毛一样。

-aux            获取所有的进程的详细信息。包括没有tty的进程和leader进程。

-C cmdlist      获取对应cmd的进程

-p pidlist      获取对应pid的进程

-u userlist     获取对应user的进程

-f              获取格式化信息

--sort spec     根据spec排序输出，example：ps jax --sort=uid,-ppid,+pid
                + - 代表增序和降序
                example: 按cpu时间排序 ps -aux --sort -pcpu
                example: 按内存使用排序 ps -aux --sort -pmem
                example: ps -aux --sort -pcpu,+pmem 多标准排序

k               不加               

-L pid          获取特定进程的所有线程

```
